<!--
  Generated template for the RosterPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>My Roster</ion-title>
  </ion-navbar>

</ion-header>

<ion-content padding>
  <ion-card>
    <ion-calendar #calendar [events]="currentEvents" (onDaySelect)="onDaySelect($event)" (onMonthSelect)="onMonthSelect($event)"></ion-calendar>
    <div class="buttonGroup">
      <button ion-button (click)="calendar.today()">Today</button>

        <button id="notifications-button" clear ion-button *ngIf="thereAreOutstandingSwaps" (click)="swap()">Accept Swaps
          <ion-badge id="notification-badge" *ngIf="thereAreOutstandingSwaps">{{numberOfOutstandingSwaps}}</ion-badge>
        </button>
      <button ion-button (click)="requestSwap()" [disabled] = "!thereIsAKAOSClinicianAvailableToday">Request Swap</button>
      <button ion-button *ngIf="loggedInUserIsAdmin" (click)="addRosterDate($event)">Allocate</button>
    </div>
  </ion-card>
  <ion-card>
    <div class="KAOSToday">
      {{roster_date}}: {{KAOSClinicianOnCall}}
    </div>
    <ion-refresher (ionRefresh)="doRefresh($event)">
    <ion-refresher-content
      pullingIcon="arrow-dropdown"
      pullingText="Pull to refresh"
      refreshingSpinner="circles"
      refreshingText="Refreshing...">
    </ion-refresher-content>
  </ion-refresher>
    <ion-list *ngIf="thisWeeksRoster?.length > 0; else norosterthisweek">
      <ion-list-header>
        <h1>This Week</h1>
      </ion-list-header>
        <ion-item *ngFor="let roster of thisWeeksRoster">
            <ion-label>
              <strong>{{roster.date}}</strong>
            </ion-label>
            <ion-label>
              {{roster.user_title}} {{roster.user_first_name}} {{roster.user_second_name}}
            </ion-label>
        </ion-item>
    </ion-list>
    <ng-template #norosterthisweek>
      <div class="KAOSThisWeek">There are no allocated dates this week</div>
    </ng-template>
  </ion-card>
</ion-content>

<ion-footer>
</ion-footer>
